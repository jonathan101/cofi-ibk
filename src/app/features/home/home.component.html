<div class="home-container">
  <!-- Header -->
  <header class="home-header">
    <button class="icon-button" (click)="toggleSidebar()" aria-label="Menú">
      <span class="material-symbols-outlined">menu</span>
    </button>

    <img 
      src="https://lh3.googleusercontent.com/aida-public/AB6AXuDmwqnFWgxP-MIfxvcI5-h-PCQqux5Mrh_qZehZeL874gPw5Z5POi0Ki_xY8tEOUX0KO1uSw69aAigURJae5LYfH3whY7skz8XBTfLmpW05EvnYt9jtPFpiHMDxuaewN7AM36FRqzCd4_j_h_JjP-jReFCbFn6iQmEpPliKfBvmDpeHUH9oRYTnXw2cFvZJE0V4fO-QO62pIi3wYGLeSQJhIUv3kSXO68ONOvHAospqdlCmt7jc1zAgA6Crryew9Ce8qxCvFkwDjZo" 
      alt="Interbank Logo" 
      class="logo"
    />

    <button class="icon-button notification-button" aria-label="Notificaciones">
      <span class="material-symbols-outlined">notifications</span>
      <span class="notification-badge"></span>
    </button>
  </header>

  <!-- Main Content -->
  <main class="home-content">
    <!-- Título Principal -->
    <h1 class="main-title">¿A quién le vas a Plinear hoy?</h1>

    <!-- Sección de Plin -->
    <section class="plin-section">
      <div class="plin-contacts">
        <div 
          *ngFor="let contacto of contactosPlin; let i = index" 
          class="plin-contact"
        >
          <button 
            class="plin-button"
            [class.plin-button-primary]="i === 0"
            [class.plin-button-add]="i > 0"
            (click)="i === 0 ? onPlinearClick() : onAgregarContactoClick()"
          >
            <img 
              *ngIf="i === 0"
              src="https://lh3.googleusercontent.com/aida-public/AB6AXuC_7zqiJDHR1tCm8HYJdfQ6gJDXFL65qgvrgo93a1JJpTzZvuygXFE1XSgr2pRB5Vw0yoGNKggEtFn_mmeM_dZgBwh8Rv85RRxxqk2ecjFWw4mgLbF4okRNsZ3fQU8uqvKa2-_CYtYuhuJdHFxtfFXlqgjMgcbVyzQ3AIHg9d43qjtwmJo9N1Cb8eehEhaXq9A6bw0Q9J_0aB5JijpiiVNb4bsd52VDS_xa3ShL-RvALKrgh2G3lyjY4-R33KFsEpEFqOHrV4VhL6Y"
              alt="Plin logo"
              class="plin-logo"
            />
            <span *ngIf="i > 0" class="material-symbols-outlined">add</span>
          </button>
          <span class="plin-label" [class.plin-label-primary]="i === 0">
            {{ contacto.nombre }}
          </span>
        </div>
      </div>
    </section>

    <!-- Tipo de Cambio -->
    <p class="exchange-rate-text">
      T.C. referencial: Compra: <strong>{{ tipoCambio.compra }}</strong> Venta: <strong>{{ tipoCambio.venta }}</strong>
    </p>

    <!-- Productos Bancarios -->
    <section class="products-section">
      <div class="products-card">
        <div class="products-header">
          <h2 class="products-title">Productos</h2>
          <button class="edit-button" (click)="onEditarProductosClick()" aria-label="Editar productos">
            <span class="material-symbols-outlined fill-icon">edit</span>
          </button>
        </div>

        <div class="products-list">
          <a 
            *ngFor="let producto of productos" 
            class="product-item"
            (click)="onProductoClick(producto)"
          >
            <div class="product-icon-wrapper">
              <span 
                class="material-symbols-outlined product-icon" 
                [style.color]="producto.iconoColor"
              >
                {{ producto.icono }}
              </span>
            </div>
            
            <div class="product-details">
              <p class="product-name">{{ producto.nombre }}</p>
              <p class="product-description">{{ producto.descripcion }}</p>
            </div>

            <div class="product-actions">
              <p class="product-balance">•••••</p>
              <span class="material-symbols-outlined chevron-icon">chevron_right</span>
            </div>
          </a>
        </div>
      </div>
    </section>
  </main>

  <!-- Botón Flotante de Chat (Chanchito Verde) -->
  <button 
    class="chat-floating-button" 
    (click)="onChatButtonClick()"
    aria-label="Abrir chat"
  >
    <span class="material-symbols-outlined">savings</span>
    <span *ngIf="notificationCount > 0" class="chat-badge">{{ notificationCount }}</span>
  </button>

  <!-- Navegación Inferior -->
  <app-bottom-navigation></app-bottom-navigation>
</div>

<!-- Sidebar Menu -->
<app-sidebar-menu 
  *ngIf="showSidebar"
  (close)="closeSidebar()">
</app-sidebar-menu>
